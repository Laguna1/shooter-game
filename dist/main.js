(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var i=s.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class t extends Phaser.GameObjects.Sprite{constructor(e,t,s,i,a){super(e,t,s,i),this.scene=e,this.scene.add.existing(this),this.scene.physics.world.enableBody(this,0),this.setData("type",a),this.setData("isDead",!1)}explode(e){this.getData("isDead")||(this.setTexture("sprExplosion"),this.play("sprExplosion"),this.scene.sfx.explosions[Phaser.Math.Between(0,this.scene.sfx.explosions.length-1)].play(),void 0!==this.shootTimer&&this.shootTimer&&this.shootTimer.remove(!1),this.setAngle(0),this.body.setVelocity(0,0),this.on("animationcomplete",(function(){e?this.destroy():this.setVisible(!1)}),this),this.setData("isDead",!0))}}class s extends t{constructor(e,t,s){super(e,t,s,"sprLaserPlayer"),this.body.velocity.y=-200}}class i extends t{constructor(e,t,s){super(e,t,s,"sprLaserEnemy0"),this.body.velocity.y=200}}class a extends t{constructor(e,t,s){super(e,t,s,"sprEnemy1","ChaserShip"),this.body.velocity.y=Phaser.Math.Between(50,100),this.states={MOVE_DOWN:"MOVE_DOWN",CHASE:"CHASE"},this.state=this.states.MOVE_DOWN}update(){if(!this.getData("isDead")&&this.scene.player&&(Phaser.Math.Distance.Between(this.x,this.y,this.scene.player.x,this.scene.player.y)<320&&(this.state=this.states.CHASE),this.state==this.states.CHASE)){const e=this.scene.player.x-this.x,t=this.scene.player.y-this.y,s=Math.atan2(t,e),i=100;this.body.setVelocity(Math.cos(s)*i,Math.sin(s)*i),this.x<this.scene.player.x?this.angle-=5:this.angle+=5}}}class h extends t{constructor(e,t,s){super(e,t,s,"sprEnemy0","GunShip"),this.play("sprEnemy0"),this.body.velocity.y=Phaser.Math.Between(50,100),this.shootTimer=this.scene.time.addEvent({delay:1e3,callback(){const e=new i(this.scene,this.x,this.y);e.setScale(this.scaleX),this.scene.enemyLasers.add(e)},callbackScope:this,loop:!0})}onDestroy(){void 0!==this.shootTimer&&this.shootTimer&&this.shootTimer.remove(!1)}}class n extends t{constructor(e,t,s){super(e,t,s,"sprEnemy2","CarrierShip"),this.play("sprEnemy2"),this.body.velocity.y=Phaser.Math.Between(50,100)}}class r{constructor(e,t,s){this.scene=e,this.key=t,this.velocityY=s,this.layers=this.scene.add.group(),this.createLayers()}createLayers(){for(let e=0;e<2;e++){const t=this.scene.add.sprite(0,0,this.key);t.y=t.displayHeight*e;const s=Phaser.Math.Between(0,10)>=5?-1:1,i=Phaser.Math.Between(0,10)>=5?-1:1;t.setScale(2*s,2*i),t.setDepth(-5-(e-1)),this.scene.physics.world.enableBody(t,0),t.body.velocity.y=this.velocityY,this.layers.add(t)}}update(){if(this.layers.getChildren()[0].y>0)for(let e=0;e<this.layers.getChildren().length;e++){const t=this.layers.getChildren()[e];t.y=-t.displayHeight+t.displayHeight*e}}}const o=class extends t{constructor(e,t,s,i){super(e,t,s,i,"Player"),this.setData("speed",200),this.setData("isShooting",!1),this.setData("timerShootDelay",10),this.setData("timerShootTick",this.getData("timerShootDelay")-1)}moveUp(){this.body.velocity.y=-this.getData("speed")}moveDown(){this.body.velocity.y=this.getData("speed")}moveLeft(){this.body.velocity.x=-this.getData("speed")}moveRight(){this.body.velocity.x=this.getData("speed")}onDestroy(){this.scene.time.addEvent({delay:1e3,callback(){this.scene.scene.start("SceneGameOver")},callbackScope:this,loop:!1})}update(){if(this.body.setVelocity(0,0),this.x=Phaser.Math.Clamp(this.x,0,this.scene.game.config.width),this.y=Phaser.Math.Clamp(this.y,0,this.scene.game.config.height),this.getData("isShooting"))if(this.getData("timerShootTick")<this.getData("timerShootDelay"))this.setData("timerShootTick",this.getData("timerShootTick")+1);else{const e=new s(this.scene,this.x,this.y);this.scene.playerLasers.add(e),this.scene.sfx.laser.play(),this.setData("timerShootTick",0)}}},d=e.p+"69e06beee14d2de3c945b711ad4576a4.png",p=e.p+"828f21312dab61d55775573776e31f6d.png",c=e.p+"39b92588a2a71782c23bf199fd30607e.png",l=e.p+"d27ee8c280fc534f4d1dcb69eccc4e92.png",y=e.p+"5589fa15083aa1ed6b9f33b4c85c2012.png",g=e.p+"887ae7aa2f57406c23a83c780cf95027.png",m=e.p+"45488043a3c4df893a3803fa12931e8b.png",f=e.p+"2a20c508698d089e5ea645a5f6fb9b17.png",u=e.p+"3c1d5d777a8654a6b17c529a0d9309c6.wav",b=e.p+"98c7cccfed9e1d6d6da346b80602ddb2.wav";class D extends Phaser.Scene{constructor(){super({key:"SceneMainMenu"})}preload(){this.load.image("sprBg0",d),this.load.image("sprBg1",p),this.load.image("sprBtnPlay",c),this.load.image("sprBtnPlayHover",l),this.load.image("sprBtnPlayDown",y),this.load.image("sprBtnRestart",g),this.load.image("sprBtnRestartHover",m),this.load.image("sprBtnRestartDown",f),this.load.audio("sndBtnOver",u),this.load.audio("sndBtnDown",b)}create(){this.sfx={btnOver:this.sound.add("sndBtnOver"),btnDown:this.sound.add("sndBtnDown")},this.btnPlay=this.add.sprite(.5*this.game.config.width,.5*this.game.config.height,"sprBtnPlay"),this.btnPlay.setInteractive(),this.btnPlay.on("pointerover",(function(){this.btnPlay.setTexture("sprBtnPlayHover"),this.sfx.btnOver.play()}),this),this.btnPlay.on("pointerout",(function(){this.setTexture("sprBtnPlay")})),this.btnPlay.on("pointerdown",(function(){this.btnPlay.setTexture("sprBtnPlayDown"),this.sfx.btnDown.play()}),this),this.btnPlay.on("pointerup",(function(){this.btnPlay.setTexture("sprBtnPlay"),this.scene.start("SceneMain")}),this),this.title=this.add.text(.5*this.game.config.width,128,"SPACE SHOOTER GAME",{fontFamily:"monospace",fontSize:48,fontStyle:"bold",color:"#ffffff",align:"center"}),this.title.setOrigin(.5),this.backgrounds=[];for(let e=0;e<5;e++){const t=["sprBg0","sprBg1"],s=t[Phaser.Math.Between(0,t.length-1)],i=new r(this,s,10*e);this.backgrounds.push(i)}}update(){for(let e=0;e<this.backgrounds.length;e++)this.backgrounds[e].update()}}const w=D,x=e.p+"b4fc97f94ccaaafd151a3860bc902ba0.png",v=e.p+"61a6495ae27a47d88f744b013eb605b7.png",P=e.p+"c92fd751e2425a2e60a8ca6746892444.png",S=e.p+"b304e61c32c5c226514733dd3134f55b.png",B=e.p+"89b2a9fbd0f3ba907756a22d7bf245ec.png",k=e.p+"dd818fdfb7930c2cc0c57e2e7ff37ab2.png",E=e.p+"ee655b47c1bbc09219bc42723135466b.png",M=e.p+"59054d5f02805be881c6c8fd814e7bbd.wav",T=e.p+"bd193892f478770d941214338896c648.wav",C=e.p+"0fa9e1340470d9a5a1f519da7a1e18dd.wav";class R extends Phaser.Scene{constructor(){super({key:"SceneMain"})}preload(){this.load.image("sprBg0",d),this.load.image("sprBg1",p),this.load.spritesheet("sprExplosion",x,{frameWidth:32,frameHeight:32}),this.load.spritesheet("sprEnemy0",v,{frameWidth:16,frameHeight:16}),this.load.image("sprEnemy1",P),this.load.spritesheet("sprEnemy2",S,{frameWidth:16,frameHeight:16}),this.load.image("sprLaserEnemy0",B),this.load.image("sprLaserPlayer",k),this.load.spritesheet("sprPlayer",E,{frameWidth:16,frameHeight:16}),this.load.audio("sndExplode0",M),this.load.audio("sndExplode1",T),this.load.audio("sndLaser",C)}create(){this.anims.create({key:"sprEnemy0",frames:this.anims.generateFrameNumbers("sprEnemy0"),frameRate:20,repeat:-1}),this.anims.create({key:"sprEnemy2",frames:this.anims.generateFrameNumbers("sprEnemy2"),frameRate:20,repeat:-1}),this.anims.create({key:"sprExplosion",frames:this.anims.generateFrameNumbers("sprExplosion"),frameRate:20,repeat:0}),this.anims.create({key:"sprPlayer",frames:this.anims.generateFrameNumbers("sprPlayer"),frameRate:20,repeat:-1}),this.sfx={explosions:[this.sound.add("sndExplode0"),this.sound.add("sndExplode1")],laser:this.sound.add("sndLaser")},this.backgrounds=[];for(let e=0;e<5;e++){const t=new r(this,"sprBg0",10*e);this.backgrounds.push(t)}this.player=new o(this,.5*this.game.config.width,.5*this.game.config.height,"sprPlayer"),console.log(this.player),this.keyW=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.keyS=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.keyA=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),this.keyD=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),this.keySpace=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.enemies=this.add.group(),this.enemyLasers=this.add.group(),this.playerLasers=this.add.group(),this.time.addEvent({delay:1e3,callback(){let e=null;Phaser.Math.Between(0,10)>=3?e=new h(this,Phaser.Math.Between(0,this.game.config.width),0):Phaser.Math.Between(0,10)>=5?this.getEnemiesByType("ChaserShip").length<5&&(e=new a(this,Phaser.Math.Between(0,this.game.config.width),0)):e=new n(this,Phaser.Math.Between(0,this.game.config.width),0),null!==e&&(e.setScale(.1*Phaser.Math.Between(10,20)),this.enemies.add(e))},callbackScope:this,loop:!0}),this.physics.add.collider(this.playerLasers,this.enemies,((e,t)=>{t&&(void 0!==t.onDestroy&&t.onDestroy(),t.explode(!0),e.destroy())})),this.physics.add.overlap(this.player,this.enemies,((e,t)=>{e.getData("isDead")||t.getData("isDead")||(e.explode(!1),e.onDestroy(),t.explode(!0))})),this.physics.add.overlap(this.player,this.enemyLasers,((e,t)=>{e.getData("isDead")||t.getData("isDead")||(e.explode(!1),e.onDestroy(),t.destroy())}))}getEnemiesByType(e){const t=[];for(let s=0;s<this.enemies.getChildren().length;s++){const i=this.enemies.getChildren()[s];i.getData("type")==e&&t.push(i)}return t}update(){this.player.getData("isDead")||(this.player.update(),this.keyW.isDown?this.player.moveUp():this.keyS.isDown&&this.player.moveDown(),this.keyA.isDown?this.player.moveLeft():this.keyD.isDown&&this.player.moveRight(),this.keySpace.isDown?this.player.setData("isShooting",!0):(this.player.setData("timerShootTick",this.player.getData("timerShootDelay")-1),this.player.setData("isShooting",!1)));for(var e=0;e<this.enemies.getChildren().length;e++){const t=this.enemies.getChildren()[e];t.update(),(t.x<-t.displayWidth||t.x>this.game.config.width+t.displayWidth||t.y<4*-t.displayHeight||t.y>this.game.config.height+t.displayHeight)&&t&&(void 0!==t.onDestroy&&t.onDestroy(),t.destroy())}for(e=0;e<this.enemyLasers.getChildren().length;e++)(t=this.enemyLasers.getChildren()[e]).update(),(t.x<-t.displayWidth||t.x>this.game.config.width+t.displayWidth||t.y<4*-t.displayHeight||t.y>this.game.config.height+t.displayHeight)&&t&&t.destroy();for(e=0;e<this.playerLasers.getChildren().length;e++){var t;(t=this.playerLasers.getChildren()[e]).update(),(t.x<-t.displayWidth||t.x>this.game.config.width+t.displayWidth||t.y<4*-t.displayHeight||t.y>this.game.config.height+t.displayHeight)&&t&&t.destroy()}for(e=0;e<this.backgrounds.length;e++)this.backgrounds[e].update()}}const H=R;class O extends Phaser.Scene{constructor(){super({key:"SceneGameOver"})}create(){this.title=this.add.text(.5*this.game.config.width,128,"GAME OVER",{fontFamily:"monospace",fontSize:48,fontStyle:"bold",color:"#ffffff",align:"center"}),this.title.setOrigin(.5),this.sfx={btnOver:this.sound.add("sndBtnOver"),btnDown:this.sound.add("sndBtnDown")},this.btnRestart=this.add.sprite(.5*this.game.config.width,.5*this.game.config.height,"sprBtnRestart"),this.btnRestart.setInteractive(),this.btnRestart.on("pointerover",(function(){this.btnRestart.setTexture("sprBtnRestartHover"),this.sfx.btnOver.play()}),this),this.btnRestart.on("pointerout",(function(){this.setTexture("sprBtnRestart")})),this.btnRestart.on("pointerdown",(function(){this.btnRestart.setTexture("sprBtnRestartDown"),this.sfx.btnDown.play()}),this),this.btnRestart.on("pointerup",(function(){this.btnRestart.setTexture("sprBtnRestart"),this.scene.start("SceneMain")}),this),this.backgrounds=[];for(let e=0;e<5;e++){const t=["sprBg0","sprBg1"],s=t[Phaser.Math.Between(0,t.length-1)],i=new r(this,s,10*e);this.backgrounds.push(i)}}update(){for(let e=0;e<this.backgrounds.length;e++)this.backgrounds[e].update()}}const L=O;var W={type:Phaser.AUTO,width:480,height:640,backgroundColor:"black",physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:[w,H,L],pixelArt:!0,roundPixels:!0};new Phaser.Game(W)})();